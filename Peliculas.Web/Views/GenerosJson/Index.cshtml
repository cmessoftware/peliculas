@model Peliculas.Web.ViewModels.GeneroViewModel

@{
    ViewBag.Title = "Generos";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Generos</title>
</head>
<body onload="GetGeneros()">

<h2>Generos de peliculas</h2>

    <div id="divErrors"
            class="alert alert-danger alert-dimissible fase show"
            role="alert"
            style="display:none">
            <strong>
                <span id="errors"></span>
            </strong>
            <button type="button" class="close" data-dismiss="alert" arial-label="Cerrar">
                <span aria-hidden="true">&times;</span>
            </button>
    </div>

    <table id="gridGeneros" class="table table-bordered">
        <tr>
            <td>Id</td>
            <td>Nombre</td>
        </tr>
    </table>

    <script>
        $(function() {
        
        })

        function GetGeneros()
        {
            $.get('/GenerosJson/generos').done(function(data)
            {
                var estado = data.Estado;

                if(estado)
                {
                    $.each(data,function(idx, genero){
                    
                        var $grid = $('gridGeneros');
                        //create row
                        var $tr = $('<tr></tr>');

                        //create columns
                        $tr.append('<td>' + genero.Id + '</td>');
                        $tr.append('<td>' + genero.Nombre + '</td>');

                        //crete other column
                        var $td = $('<td></td>');
                        $td.add('<a class="btn btn-primary btn-sm fas fa-edit" href="/GenerosJson/Editar/' + genero.id + '">');
                        $td.add('<a class="btn btn-primary btn-sm fas fa-info-circle" href="/GenerosJson/Detalle/' + genero.id + '">');

                        //add row
                        $tr.append($td);

                        //add into grid
                        $grid.append($tr);

                    })
                }
                else
                {
                    var errors = data.Errors
                    displayValidationErrors(errors);
                }

        
            })
        }


    </script>
    </body>
</html>

